{% load rhweb_tags %}

{% for symbol, security in securities.items %}
    {{ symbol }} <br>
    {{ security }}
{% endfor %}

<div class="col">

    <table id="stock-table" class="table table-striped table-bordered" width="100%" cellspacing="0">
        <thead>
        <tr>
            <th>Name</th>
            <th>Symbol</th>
            <th>Shares</th>
            <th>Average Cost</th>
            <th>Total Cost</th>
            <th>Return Per Share</th>
            <th>Total Return</th>
            <th>Total Percent</th>
            <th>Equity</th>
            <th>Last</th>
            <th>Today Percent</th>
            <th>Today Return</th>
            <th>Today Per Share</th>
        </tr>
        </thead>
        <tbody>

        {% for symbol, security in securities.items %}
            {% if security.security %}

                    <tr id="tr-{{ symbol }}">
                        <td>
                            <a href="{% url 'stock_view' symbol=symbol %}" target="_blank">
                                {% if security.security.simple_name == None %}
                                    {{ security.security.name|truncatechars:22 }}
                                {% else %}
                                    {{ security.security.simple_name|truncatechars:22 }}
                                {% endif %}
                            </a>
                        </td>

                        <td>
                            <a href="{% url 'stock_view' symbol=symbol %}" target="_blank">
                                {{ symbol }}
                            </a>
                        </td>

                        <td>{{ security.position.quantity|round_it:0 }}</td>

                        <td>${{ security.position.average_buy_price|usd_float }}</td>

                        <td id="cost-{{ s.symbol }}">${{ s.info.cost}}</td>

                        <td class="text-{{ s.status.class }}">
                            ${{ s.info.pershare }}
                        </td>

                        <td class="text-{{ s.status.class }}">
                            ${{ s.info.profit }}
                        </td>

                        <td class="text-{{ s.status.class }}">
                            <strong>{{ s.info.percent }}%</strong>
                        </td>

                        <td class="text-white">${{ s.info.equity }}</td>

                        <td class="" id="last-{{ symbol }}">
                            Loading
                        </td>

                        <td class="text-{{ s.daily.status.class }}">
                            {{ s.daily.percent }}%
                        </td>

                        <td class="text-{{ s.daily.status.class }}">
                            ${{ s.daily.total }}
                        </td>

                        <td class="text-{{ s.daily.status.class }}">
                            ${{ s.daily.pershare }}
                        </td>
                    </tr>

            {% else %}

                <td colspan="8">
                    Security not found for instrument: {{ security.instrument }}
                </td>

            {% endif %}
        {% endfor %}

        </tbody>
    </table>

</div>
